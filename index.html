<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>La Casa Box & Shakes - Card√°pio</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#121212" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="La Casa Box & Shakes" />
    <link
      rel="apple-touch-icon"
      href="https://i.ibb.co/FkSqmpJD/la-casa-de-doner-box-logo-final-trema-uniform-v2.webp"
    />
    <link
      rel="manifest"
      href="data:application/manifest+json;base64,eyJzaG9ydF9uYW1lIjoiTGEgQ2FzYSBCJlMiLCJuYW1lIjoiTGEgQ2FzYSBCb3ggJiBTaGFrZXMiLCJpY29ucyI6W3sic3JjIjoiaHR0cHM6Ly9pLmliYi5jby9Ga1NxbXBJRC9sYS1jYXNhLWRlLWRvbmVyLWJveC1sb2dvLWZpbmFsLXRyZW1hLXVuaWZvcm0tdjIud2VicCIsInR5cGUiOiJpbWFnZS93ZWJwIiwic2l6ZXMiOiIxOTJ4MTkyIn0seyJzcmMiOiJodHRwczovL2kuaWJiLmNvL0ZrU3FtcEpEL2xhLWNhc2EtZGUtZG9uZXItYm94LWxvZ28tZmluYWwtdHJlbWEtdW5pZm9ybS12Mi53ZWJwIiwidHlwZSI6ImltYWdlL3dlYnAiLCJzaXplcyI6IjUxMng1MTIifV0sInN0YXJ0X3VybCI6Ii4iLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzEyMTIxMiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwic2NvcGUiOiIuIiwidGhlbWVfY29sb3IiOiIjMTIxMjEyIn0="
    />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Anton (nova), Dancing Script, Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&family=Dancing+Script:wght@700&family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos personalizados -->
    <style>
      body {
        font-family: "Roboto", sans-serif;
        background-color: #581c87; /* Roxo escuro */
        /* Ajuste para o rodap√© fixo */
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      /* Faz o conte√∫do principal crescer e empurrar o rodap√© para baixo */
      main {
        flex-grow: 1;
      }
      .font-anton {
        font-family: "Anton", sans-serif;
      }
      .font-dancing {
        font-family: "Dancing Script", cursive;
      }
      /* Estilo da barra de rolagem */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #232323;
      }
      ::-webkit-scrollbar-thumb {
        background: #e53935; /* Vermelho */
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #fdd835; /* Amarelo */
      }
      /* Estilos para o Carrinho */
      #cart-container {
        transform: translateY(100%);
        transition: transform 0.3s ease-in-out;
      }
      #cart-container.is-open {
        transform: translateY(0);
      }
      /* Anima√ß√£o para a descri√ß√£o aparecer */
      .item-description {
        transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out,
          padding 0.5s ease-in-out;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        padding-bottom: 0 !important;
      }
      .item-description.show {
        max-height: 200px;
        opacity: 1;
        padding-bottom: 0.75rem !important;
      }
      /* ESTILOS ATUALIZADOS para bot√µes de filtro */
      .filter-btn {
        background-color: #ef4444; /* Vermelho */
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-weight: bold;
        transition: all 0.2s;
        border: 2px solid #000; /* Borda preta */
      }
      .filter-btn:hover {
        background-color: #dc2626; /* Vermelho mais escuro no hover */
        color: white;
      }
      .filter-btn.active {
        background-color: #fdd835; /* Amarelo */
        color: #121212; /* Preto */
        border-color: #fdd835;
      }
      /* Garantir que o modal apare√ßa na frente de tudo */
      #checkout-modal {
        z-index: 100;
      }
    </style>
  </head>
  <body class="bg-purple-900 text-white">
    <!-- Cabe√ßalho com fundo preto -->
    <header class="py-6 md:py-10 bg-black shadow-xl">
      <div class="container mx-auto text-center px-4">
        <h1
          class="font-anton text-3xl sm:text-5xl md:text-7xl tracking-wider flex items-center flex-wrap justify-center gap-x-2 sm:gap-x-3 gap-y-2"
        >
          <span class="text-red-600">LA CASA</span>
          <span class="bg-white text-red-600 px-3 py-1 rounded-md leading-none"
            >BOX</span
          >
          <span class="text-purple-500">& SHAKES</span>
        </h1>
        <p class="font-dancing text-white text-xl sm:text-2xl md:text-3xl mt-4">
          O sabor que te pega de jeito!
        </p>
      </div>
    </header>

    <!-- Conte√∫do Principal -->
    <main class="container mx-auto px-4 pb-40">
      <!-- Bot√µes de Filtro de Categoria -->
      <div
        id="category-filters"
        class="flex flex-wrap justify-center gap-2 sm:gap-4 my-8"
      >
        <!-- Bot√µes ser√£o inseridos aqui -->
      </div>
      <div id="menu" class="grid grid-cols-2 md:grid-cols-3 gap-4">
        <!-- Os itens do menu ser√£o inseridos aqui pelo JavaScript -->
      </div>
    </main>

    <!-- Rodap√© -->
    <footer class="bg-black text-white py-8 shadow-inner mt-10">
      <div class="container mx-auto px-4 text-center text-gray-400">
        <h3 class="font-anton text-2xl text-white mb-4">Nossa Qualidade</h3>
        <div class="max-w-3xl mx-auto text-sm space-y-3">
          <p>
            <span class="font-bold text-purple-400">A√ßa√≠ Premium:</span>
            Trabalhamos com a√ßa√≠ de proced√™ncia garantida da marca
            <span class="font-semibold text-white">Polpa Norte</span>, conhecido
            por sua pureza e sabor aut√™ntico.
          </p>
          <p>
            <span class="font-bold text-yellow-400"
              >Batata Recheada Flor√£o:</span
            >
            Nossas batatas s√£o cuidadosamente selecionadas. Utilizamos a
            <span class="font-semibold text-white">batata tipo Flor√£o</span>,
            ideal para um resultado cremoso por dentro e crocante por fora.
          </p>
        </div>
        <div class="mt-6 border-t border-gray-700 pt-4">
          <p class="text-xs">LA CASA BOX & SHAKES</p>
          <p class="text-xs">CNPJ: 49.713.998/0001-60</p>
          <p class="text-xs mt-2">Rio Brilhante - MS</p>
        </div>
      </div>
    </footer>

    <!-- Carrinho de Compras Flutuante -->
    <div
      id="cart-container"
      class="fixed bottom-0 left-0 right-0 bg-gray-900 border-t-4 border-red-600 shadow-2xl transition-transform"
    >
      <div class="container mx-auto p-4">
        <div
          class="flex justify-between items-center cursor-pointer"
          id="cart-header-area"
        >
          <h2 class="font-anton text-2xl text-yellow-400">
            Meu Pedido (<span id="cart-count">0</span> itens)
          </h2>
          <button id="toggle-cart-btn" class="p-2">
            <svg
              id="cart-arrow"
              class="w-6 h-6 text-white transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M5 15l7-7 7 7"
              ></path>
            </svg>
          </button>
        </div>
        <div id="cart-content" class="overflow-hidden">
          <div id="cart-items" class="mt-4 max-h-48 overflow-y-auto hidden">
            <p id="empty-cart-message" class="text-gray-400 text-center py-4">
              Seu carrinho est√° vazio.
            </p>
          </div>
          <div id="cart-footer" class="mt-4 hidden">
            <div class="flex justify-between items-center text-xl font-bold">
              <span>Total:</span>
              <span id="cart-total">R$ 0,00</span>
            </div>
            <button
              id="open-checkout-modal-btn"
              class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg mt-4 transition-colors duration-300 flex items-center justify-center text-lg shadow-lg"
            >
              <img
                src="https://i.ibb.co/sXKCwKs/3536445.png"
                alt="WhatsApp Icon"
                class="w-6 h-6 mr-3"
              />
              Finalizar no WhatsApp
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Checkout -->
    <div
      id="checkout-modal"
      class="modal-overlay fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden opacity-0"
    >
      <div
        class="modal-content bg-gray-800 rounded-xl shadow-2xl p-6 w-full max-w-md transform scale-95 border-t-4 border-red-600 max-h-[90vh] overflow-y-auto"
      >
        <h2 class="font-anton text-3xl text-yellow-400 mb-4">Quase l√°!</h2>
        <p class="text-gray-300 mb-6">
          Preencha seus dados para enviarmos o pedido.
        </p>
        <form id="checkout-form">
          <div class="mb-4">
            <label
              for="customer-name"
              class="block text-gray-300 mb-2 font-bold"
              >Nome (para entrega)</label
            >
            <input
              type="text"
              id="customer-name"
              class="w-full bg-gray-700 border border-gray-600 rounded-lg py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
              required
            />
          </div>

          <div class="mb-4">
            <label class="block text-gray-300 mb-2 font-bold"
              >Op√ß√£o de Entrega</label
            >
            <div class="flex gap-4" id="delivery-options">
              <div class="flex-1">
                <input
                  type="radio"
                  id="delivery"
                  name="delivery_option"
                  value="delivery"
                  class="hidden peer"
                  checked
                />
                <label
                  for="delivery"
                  class="block cursor-pointer p-3 text-center rounded-lg border-2 border-gray-600 peer-checked:border-green-500 peer-checked:bg-green-500 peer-checked:bg-opacity-20 transition-all"
                >
                  <span class="font-bold">Delivery</span>
                </label>
              </div>
              <div class="flex-1">
                <input
                  type="radio"
                  id="pickup"
                  name="delivery_option"
                  value="pickup"
                  class="hidden peer"
                />
                <label
                  for="pickup"
                  class="block cursor-pointer p-3 text-center rounded-lg border-2 border-gray-600 peer-checked:border-yellow-400 peer-checked:bg-yellow-400 peer-checked:bg-opacity-20 transition-all"
                >
                  <span class="font-bold">Retirada</span>
                </label>
              </div>
            </div>
          </div>

          <div id="address-fields" class="mb-4">
            <div class="flex gap-4">
              <div class="flex-grow">
                <label
                  for="customer-street"
                  class="block text-gray-300 mb-2 font-bold"
                  >Rua</label
                >
                <input
                  type="text"
                  id="customer-street"
                  class="w-full bg-gray-700 border border-gray-600 rounded-lg py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
                />
              </div>
              <div>
                <label
                  for="customer-number"
                  class="block text-gray-300 mb-2 font-bold"
                  >N¬∫</label
                >
                <input
                  type="text"
                  id="customer-number"
                  class="w-24 bg-gray-700 border border-gray-600 rounded-lg py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"
                />
              </div>
            </div>
          </div>

          <div
            id="pickup-address"
            class="mb-4 p-3 bg-gray-700 rounded-lg text-center hidden"
          >
            <p class="font-bold text-white">Endere√ßo para Retirada:</p>
            <p class="text-yellow-400">Av. Lourival Barbosa, 68 - Ol√≠mpico</p>
          </div>

          <div class="mb-6">
            <label class="block text-gray-300 mb-2 font-bold"
              >Forma de Pagamento</label
            >
            <div class="flex gap-2 sm:gap-4" id="payment-options">
              <div class="flex-1">
                <input
                  type="radio"
                  id="pix"
                  name="payment_option"
                  value="Pix"
                  class="hidden peer"
                  checked
                />
                <label
                  for="pix"
                  class="block cursor-pointer p-3 text-center rounded-lg border-2 border-gray-600 peer-checked:border-blue-500 peer-checked:bg-blue-500 peer-checked:bg-opacity-20 transition-all"
                >
                  <span class="font-bold text-sm sm:text-base">Pix</span>
                </label>
              </div>
              <div class="flex-1">
                <input
                  type="radio"
                  id="dinheiro"
                  name="payment_option"
                  value="Dinheiro"
                  class="hidden peer"
                />
                <label
                  for="dinheiro"
                  class="block cursor-pointer p-3 text-center rounded-lg border-2 border-gray-600 peer-checked:border-green-500 peer-checked:bg-green-500 peer-checked:bg-opacity-20 transition-all"
                >
                  <span class="font-bold text-sm sm:text-base">Dinheiro</span>
                </label>
              </div>
              <div class="flex-1">
                <input
                  type="radio"
                  id="cartao"
                  name="payment_option"
                  value="Cart√£o"
                  class="hidden peer"
                />
                <label
                  for="cartao"
                  class="block cursor-pointer p-3 text-center rounded-lg border-2 border-gray-600 peer-checked:border-yellow-400 peer-checked:bg-yellow-400 peer-checked:bg-opacity-20 transition-all"
                >
                  <span class="font-bold text-sm sm:text-base">Cart√£o</span>
                </label>
              </div>
            </div>
          </div>

          <div
            id="order-summary"
            class="my-6 border-t border-gray-700 pt-4 space-y-2"
          >
            <div class="flex justify-between text-gray-300">
              <span>Subtotal</span>
              <span id="summary-subtotal">R$ 0,00</span>
            </div>
            <div
              class="flex justify-between text-gray-300"
              id="summary-delivery-line"
            >
              <span>Taxa de Entrega</span>
              <span id="summary-delivery-fee">R$ 0,00</span>
            </div>
            <div class="flex justify-between font-bold text-white text-lg">
              <span>Total a Pagar</span>
              <span id="summary-total">R$ 0,00</span>
            </div>
          </div>

          <p id="form-error" class="text-red-500 text-sm mb-4 hidden">
            ‚ö†Ô∏è Por favor, preencha todos os campos necess√°rios.
          </p>

          <div class="flex justify-end gap-4">
            <button
              type="button"
              id="cancel-checkout-btn"
              class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg transition-colors shadow-md"
            >
              Cancelar
            </button>
            <button
              type="submit"
              id="confirm-checkout-btn"
              class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg transition-colors shadow-md"
            >
              Enviar Pedido
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Notifica√ß√£o de Compra Falsa -->
    <div
      id="fake-purchase-notification"
      class="fixed top-24 left-4 bg-gray-800 border border-gray-700 text-white py-3 px-5 rounded-lg shadow-lg opacity-0 transform -translate-y-full transition-all duration-500 z-40"
    >
      <!-- O conte√∫do ser√° gerado pelo JavaScript -->
    </div>

    <!-- Modal de Item Adicionado (Notifica√ß√£o) -->
    <div
      id="notification"
      class="fixed top-5 right-5 z-50 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transform translate-x-full transition-all duration-300"
    >
      ‚úÖ Item adicionado ao carrinho!
    </div>

    <script>
      // O c√≥digo de √°udio foi removido para simplificar, pois n√£o era usado.
      // --- Service Worker Registration ---
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          // No ambiente real, 'sw.js' seria um arquivo separado.
          console.log(
            "ServiceWorker registration skipped in this sandbox environment. (PWA feature)"
          );
        });
      }
    </script>

    <script>
      // --- CONFIGURA√á√ïES ---
      const phoneNumber = "5567998890717"; // SEU N√öMERO DE WHATSAPP AQUI
      const deliveryFee = 5.99;
      const defaultImagePlaceholder =
        "https://placehold.co/400x300/e53935/fff?text=LA+CASA+BOX+%26+SHAKES";

      // ITENS DO MENU ORDENADOS POR PRE√áO
      const menuItems = [
        {
          id: 42,
          name: "Batata Recheada de Calabresa",
          category: "Batata recheada no pote 500(g)",
          description:
            "Batata recheada de calabresa, requeij√£o cremoso, cheddar derretido e queijo mussarela gratinada no ma√ßarico ‚Äî sabor irresist√≠vel!",
          price: 29.9,
          image:
            "https://i.ibb.co/gb49Nc3B/Chat-GPT-Image-18-de-out-de-2025-23-20-51.png",
        },
        {
          id: 43,
          name: "Batata Recheada de Bacon e Calabresa",
          category: "Batata recheada no pote 500(g)",
          description:
            "Batata recheada de bacon crocante e calabresa suculenta, coberta com requeij√£o cremoso, cheddar derretido e mussarela gratinada no ma√ßarico!",
          price: 32.0,
          image:
            "https://i.ibb.co/wZR6TTKy/Chat-GPT-Image-17-de-out-de-2025-22-33-26.png",
        },
        {
          id: 54,
          name: "Batata Recheada de Frango com Bacon",
          category: "Batata recheada no pote 500(g)",
          description:
            "Deliciosa batata recheada com cubos de frango e bacon crocante, coberta com cheddar e mussarela gratinada no ma√ßarico.",
          price: 34.0,
          image:
            "https://i.ibb.co/qS3btWy/Chat-GPT-Image-18-de-out-de-2025-12-36-26.png",
        },
        {
          id: 53,
          name: "Batata Recheada de Carne Seca",
          category: "Batata recheada no pote 500(g)",
          description:
            "Deliciosa batata recheada com carne seca desfiada, requeij√£o cremoso e queijo mussarela gratinado no ma√ßarico. Um cl√°ssico irresist√≠vel!",
          price: 36.0,
          image:
            "https://i.ibb.co/5W80XnK2/Chat-GPT-Image-18-de-out-de-2025-12-25-08.png",
        },
        {
          id: 39,
          name: "Batata Recheada de Strogonoff de Frango",
          category: "Batata recheada no pote 500(g)",
          description:
            "Creme de batata com strogonoff de frango cremoso, coberto com queijo mussarela gratinado e batata palha.",
          price: 37.0,
          image:
            "https://i.ibb.co/8D5PmwKh/Chat-GPT-Image-18-de-out-de-2025-10-13-42.png",
        },
        {
          id: 44,
          name: "Batata Recheada de Strogonoff de Carne",
          category: "Batata recheada no pote 500(g)",
          description:
            "Batata recheada com strogonoff de carne macia, requeij√£o cremoso, cheddar e mussarela gratinada no ma√ßarico ‚Äî finalizada com batata palha crocante!",
          price: 39.9,
          image:
            "https://i.ibb.co/Lz0vkLHn/Chat-GPT-Image-17-de-out-de-2025-22-34-35.png",
        },

        {
          id: 55,
          name: "Combo Casal Strogonoff + 2 Coca-Cola 250ml",
          category: "Combos",
          description:
            "Uma batata de strogonoff de carne e uma de frango, acompanhadas por duas Coca-Cola 250ml geladas. Perfeito para dividir!",
          price: 77.0,
          image:
            "https://i.ibb.co/7NB8R6Vk/Chat-GPT-Image-18-de-out-de-2025-00-47-11.png",
        },
        {
          id: 56,
          name: "Super Combo Fam√≠lia",
          category: "Combos",
          description:
            "2 Batatas Strogonoff (1 de Frango, 1 de Carne), 2 Batatas (1 de Calabresa, 1 de Bacon) + Coca-Cola 1.5L.",
          price: 125.0,
          image:
            "https://i.ibb.co/tM5sVB8r/Chat-GPT-Image-18-de-out-de-2025-01-01-55.png",
        },

        {
          id: 32,
          name: "Shake de A√ßa√≠ Leitinho",
          category: "Shakes de A√ßa√≠ na Garrafa 300ml",
          description:
            "A cremosidade inconfund√≠vel do Leite Ninho em um shake de a√ßa√≠ Polpanorte que √© pura nostalgia e sabor. Uma del√≠cia a cada gole!",
          price: 18.0,
          image: "https://i.ibb.co/ccB0Vbbt/5.png",
        },
        {
          id: 31,
          name: "Shake de A√ßa√≠ com Ninho e Pa√ßoca",
          category: "Shakes de A√ßa√≠ na Garrafa 300ml",
          description:
            "A cremosidade do Leite Ninho se une √† croc√¢ncia da pa√ßoca e √† energia do a√ßa√≠ Polpanorte. Uma combina√ß√£o cl√°ssica e deliciosa!",
          price: 20.0,
          image: "https://i.ibb.co/0V9Q0zNN/4.png",
        },
        {
          id: 29,
          name: "Shake de A√ßa√≠ com Avel√£",
          category: "Shakes de A√ßa√≠ na Garrafa 300ml",
          description:
            "A combina√ß√£o perfeita do a√ßa√≠ Polpanorte com o sabor intenso da avel√£. Cremoso, refrescante e irresist√≠vel ‚Äî um shake que conquista no primeiro gole!",
          price: 22.0,
          image: "https://i.ibb.co/xSf6M8xB/2.png",
        },
        {
          id: 30,
          name: "Shake de A√ßa√≠ com Pistache",
          category: "Shakes de A√ßa√≠ na Garrafa 300ml",
          description:
            "A sofistica√ß√£o do pistache encontra a energia do a√ßa√≠ Polpanorte. Um shake cremoso e com um sabor √∫nico que vai te conquistar.",
          price: 24.0,
          image: "https://i.ibb.co/G3pnzG4X/3.png",
        },

        {
          id: 37,
          name: "Shake de A√ßa√≠ Leitinho (500ml)",
          category: "Shakes de A√ßa√≠ na Garrafa 500ml",
          description:
            "A cremosidade inconfund√≠vel do Leite Ninho em um shake de a√ßa√≠ Polpanorte que √© pura nostalgia e sabor. Uma del√≠cia a cada gole!",
          price: 25.0,
          image: "https://i.ibb.co/ccB0Vbbt/5.png",
        },
        {
          id: 36,
          name: "Shake de A√ßa√≠ com Ninho e Pa√ßoca (500ml)",
          category: "Shakes de A√ßa√≠ na Garrafa 500ml",
          description:
            "A cremosidade do Leite Ninho se une √† croc√¢ncia da pa√ßoca e √† energia do a√ßa√≠ Polpanorte. Uma combina√ß√£o cl√°ssica e deliciosa!",
          price: 27.0,
          image: "https://i.ibb.co/0V9Q0zNN/4.png",
        },
        {
          id: 34,
          name: "Shake de A√ßa√≠ com Avel√£ (500ml)",
          category: "Shakes de A√ßa√≠ na Garrafa 500ml",
          description:
            "A combina√ß√£o perfeita do a√ßa√≠ Polpanorte com o sabor intenso da avel√£. Cremoso, refrescante e irresist√≠vel ‚Äî um shake que conquista no primeiro gole!",
          price: 30.0,
          image: "https://i.ibb.co/xSf6M8xB/2.png",
        },
        {
          id: 35,
          name: "Shake de A√ßa√≠ com Pistache (500ml)",
          category: "Shakes de A√ßa√≠ na Garrafa 500ml",
          description:
            "A sofistica√ß√£o do pistache encontra a energia do a√ßa√≠ Polpanorte. Um shake cremoso e com um sabor √∫nico que vai te conquistar.",
          price: 32.0,
          image: "https://i.ibb.co/G3pnzG4X/3.png",
        },

        // NOVA CATEGORIA BEBIDAS
        {
          id: 48,
          name: "√Ågua Mineral sem G√°s",
          category: "Bebidas",
          description: "Garrafa 500ml.",
          price: 4.0,
          image: "https://i.ibb.co/0p12KMNG/Hidratar-se-viver-bem.jpg",
        },
        {
          id: 52,
          name: "Coca-Cola 250ml",
          category: "Bebidas",
          description: "Garrafa 250ml de Coca-Cola bem gelada.",
          price: 6.0,
          image:
            "https://i.ibb.co/HLJW25nC/Chat-GPT-Image-18-de-out-de-2025-11-47-18.png",
        },
        {
          id: 49,
          name: "Coca-Cola 1.5L",
          category: "Bebidas",
          description: "Garrafa de 1.5 litro de Coca-Cola bem gelada.",
          price: 13.0,
          image:
            "https://i.ibb.co/Kz3zKp87/Chat-GPT-Image-18-de-out-de-2025-11-38-16.png",
        },
      ];

      // --- DADOS PARA NOTIFICA√á√ÉO FALSA ---
      const fakeNames = [
        "Ana",
        "Carlos",
        "Bruna",
        "Daniel",
        "Eduarda",
        "Felipe",
        "Gabriela",
        "Heitor",
        "Isabela",
        "Jo√£o",
        "Larissa",
        "Miguel",
      ];
      const fakeNeighborhoods = [
        "Centro",
        "Vila Nova",
        "Morada do Sol",
        "Benedito Rondon",
        "Nova Esperan√ßa",
        "Ol√≠mpico",
        "Progresso",
        "Jardim a Gramado",
      ];
      const productNames = menuItems.map((item) => item.name);

      // --- L√ìGICA DA APLICA√á√ÉO ---
      document.addEventListener("DOMContentLoaded", () => {
        const menuElement = document.getElementById("menu");
        const cartItemsElement = document.getElementById("cart-items");
        const cartTotalElement = document.getElementById("cart-total");
        const cartCountElement = document.getElementById("cart-count");
        const emptyCartMessage = document.getElementById("empty-cart-message");
        const cartContainer = document.getElementById("cart-container");
        const toggleCartBtn = document.getElementById("toggle-cart-btn");
        const cartArrow = document.getElementById("cart-arrow");
        const cartFooter = document.getElementById("cart-footer");
        const notification = document.getElementById("notification");
        const checkoutModal = document.getElementById("checkout-modal");
        const openCheckoutModalBtn = document.getElementById(
          "open-checkout-modal-btn"
        );
        const cancelCheckoutBtn = document.getElementById(
          "cancel-checkout-btn"
        );
        const checkoutForm = document.getElementById("checkout-form");
        const formError = document.getElementById("form-error");
        const cartHeaderArea = document.getElementById("cart-header-area");
        // NOVOS ELEMENTOS DO FORMUL√ÅRIO
        const deliveryOptions = document.getElementById("delivery-options");
        const addressFields = document.getElementById("address-fields");
        const pickupAddress = document.getElementById("pickup-address");
        const summarySubtotal = document.getElementById("summary-subtotal");
        const summaryDeliveryLine = document.getElementById(
          "summary-delivery-line"
        );
        const summaryDeliveryFee = document.getElementById(
          "summary-delivery-fee"
        );
        const summaryTotal = document.getElementById("summary-total");
        const fakePurchaseNotification = document.getElementById(
          "fake-purchase-notification"
        );
        const categoryFiltersContainer =
          document.getElementById("category-filters");

        let cart = [];
        let isCartOpen = false;

        function renderCategoryFilters() {
          const filters = [
            { key: "Todos", text: "Ver Todos" },
            { key: "Batata", text: "Batatas" },
            { key: "Shakes", text: "Shakes" },
            { key: "Bebidas", text: "Bebidas" },
          ];

          categoryFiltersContainer.innerHTML = filters
            .map(
              (filter, index) => `
                <button class="filter-btn ${
                  index === 0 ? "active" : ""
                }" data-filter="${filter.key}">
                    ${filter.text}
                </button>
              `
            )
            .join("");

          categoryFiltersContainer.addEventListener("click", (e) => {
            const target = e.target.closest("button");
            if (!target) return;

            document
              .querySelectorAll(".filter-btn")
              .forEach((btn) => btn.classList.remove("active"));
            target.classList.add("active");

            const filter = target.dataset.filter;
            renderMenu(filter);
          });
        }

        function renderMenu(filter = "Todos") {
          let itemsToRender = menuItems;

          if (filter === "Batata") {
            itemsToRender = menuItems.filter(
              (item) =>
                item.category.includes("Batata") ||
                item.category.includes("Combos")
            );
          } else if (filter !== "Todos") {
            itemsToRender = menuItems.filter((item) =>
              item.category.includes(filter)
            );
          }

          menuElement.innerHTML = "";

          const categories = [
            ...new Set(itemsToRender.map((item) => item.category)),
          ];

          categories.forEach((category, index) => {
            const categoryTitle = document.createElement("div");
            categoryTitle.className = `col-span-2 md:col-span-3 ${
              index > 0 ? "mt-8" : ""
            } mb-4`;
            categoryTitle.innerHTML = `<h2 class="font-anton text-3xl sm:text-4xl text-white border-b-2 border-yellow-400 inline-block pb-1">${category}</h2>`;
            menuElement.appendChild(categoryTitle);

            const itemsInCategory = itemsToRender.filter(
              (item) => item.category === category
            );

            itemsInCategory.forEach((item) => {
              const menuItemElement = document.createElement("div");
              menuItemElement.className =
                "menu-item-card bg-black rounded-lg overflow-hidden shadow-xl flex flex-col transition-transform hover:scale-[1.01] duration-200 cursor-pointer";
              // AJUSTE NA IMAGEM: Altura aumentada e object-cover para preencher
              menuItemElement.innerHTML = `
                <div class="toggle-description-area">
                  <img
                    src="${item.image}"
                    alt="[Imagem de ${item.name}]"
                    class="w-full h-40 sm:h-48 object-cover"
                    onerror="this.src='${defaultImagePlaceholder}'; this.onerror=null;"
                  />
                  <div class="p-4 flex-grow flex flex-col">
                    <h3 class="font-anton text-xl text-yellow-400 mb-1 truncate">${
                      item.name
                    }</h3>
                    <!-- Descri√ß√£o que expande -->
                    <p class="item-description text-gray-300 text-sm mb-3">
                      ${item.description}
                    </p>
                    <div class="flex-grow"></div> <!-- Espa√ßador -->
                    <div class="flex justify-between items-center mt-auto">
                      <span class="text-xl font-bold text-white"
                        >R$ ${item.price.toFixed(2).replace(".", ",")}</span
                      >
                    </div>
                  </div>
                </div>
                <!-- Bot√£o Adicionar -->
                <button
                  class="add-to-cart-btn bg-red-600 hover:bg-red-700 text-white font-bold py-3 text-sm transition-colors duration-200 w-full mt-auto"
                  data-id="${item.id}"
                >
                  Adicionar ao Pedido
                </button>
              `;

              // Event listener para adicionar ao carrinho
              menuItemElement
                .querySelector(".add-to-cart-btn")
                .addEventListener("click", (e) => {
                  e.stopPropagation(); // Impede que o clique no bot√£o acione o toggle da descri√ß√£o
                  
                  const wasCartClosed = !isCartOpen;
                  const isFirstItem = cart.length === 0;

                  addToCart(item.id);

                  // Se for o primeiro item e o carrinho estava fechado, abre.
                  if (isFirstItem && wasCartClosed) {
                    toggleCart();
                  }

                  showNotification();
                });

              // Event listener para mostrar/esconder descri√ß√£o
              menuItemElement
                .querySelector(".toggle-description-area")
                .addEventListener("click", () => {
                  const desc =
                    menuItemElement.querySelector(".item-description");
                  desc.classList.toggle("show");
                });

              menuElement.appendChild(menuItemElement);
            });
          });
        }

        function addToCart(itemId) {
          const item = menuItems.find((i) => i.id === itemId);
          const existingItem = cart.find((i) => i.id === itemId);

          if (existingItem) {
            existingItem.quantity++;
          } else {
            cart.push({ ...item, quantity: 1 });
          }

          updateCart();
        }

        function updateCart() {
          cartItemsElement.innerHTML = "";
          let total = 0;
          let count = 0;

          if (cart.length === 0) {
            emptyCartMessage.classList.remove("hidden");
            cartFooter.classList.add("hidden");
            cartItemsElement.classList.add("hidden");
          } else {
            emptyCartMessage.classList.add("hidden");
            cartFooter.classList.remove("hidden");
            cartItemsElement.classList.remove("hidden");

            cart.forEach((item) => {
              total += item.price * item.quantity;
              count += item.quantity;

              const cartItemElement = document.createElement("div");
              cartItemElement.className =
                "flex justify-between items-center text-white mb-3 p-2 bg-gray-800 rounded-md";
              cartItemElement.innerHTML = `
                <div>
                  <p class="font-bold">${item.name} (x${item.quantity})</p>
                  <p class="text-sm text-gray-400">R$ ${(
                    item.price * item.quantity
                  )
                    .toFixed(2)
                    .replace(".", ",")}</p>
                </div>
                <div class="flex items-center gap-2">
                  <button class="cart-quantity-btn bg-gray-700 rounded-md p-1" data-id="${
                    item.id
                  }" data-action="decrease">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path></svg>
                  </button>
                  <button class="cart-quantity-btn bg-red-600 rounded-md p-1" data-id="${
                    item.id
                  }" data-action="remove">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                  </button>
                </div>
              `;
              cartItemsElement.appendChild(cartItemElement);
            });
          }

          cartTotalElement.innerText = `R$ ${total.toFixed(2).replace(".", ",")}`;
          cartCountElement.innerText = count;

          // Atualiza tamb√©m o sum√°rio do modal
          updateCheckoutSummary();
        }

        function handleCartQuantityChange(e) {
          const button = e.target.closest(".cart-quantity-btn");
          if (!button) return;

          const id = parseInt(button.dataset.id);
          const action = button.dataset.action;
          const itemInCart = cart.find((item) => item.id === id);

          if (!itemInCart) return;

          if (action === "decrease") {
            if (itemInCart.quantity > 1) {
              itemInCart.quantity--;
            } else {
              // Se a quantidade √© 1, remover o item
              cart = cart.filter((item) => item.id !== id);
            }
          } else if (action === "remove") {
            cart = cart.filter((item) => item.id !== id);
          }

          updateCart();
        }

        function toggleCart() {
          isCartOpen = !isCartOpen;
          cartContainer.classList.toggle("is-open");

          if (isCartOpen) {
            cartArrow.style.transform = "rotate(180deg)";
            if (cart.length > 0) {
              cartItemsElement.classList.remove("hidden");
              cartFooter.classList.remove("hidden");
            }
          } else {
            cartArrow.style.transform = "rotate(0deg)";
            cartItemsElement.classList.add("hidden");
            cartFooter.classList.add("hidden");
          }
        }

        function showNotification() {
          notification.classList.remove("opacity-0", "translate-x-full");
          notification.classList.add("opacity-100", "translate-x-0");
          setTimeout(() => {
            notification.classList.add("opacity-0", "translate-x-full");
            notification.classList.remove("opacity-100", "translate-x-0");
          }, 2000);
        }

        function formatCurrency(value) {
          return `R$ ${value.toFixed(2).replace(".", ",")}`;
        }

        function getCartSubtotal() {
          return cart.reduce(
            (total, item) => total + item.price * item.quantity,
            0
          );
        }

        function updateCheckoutSummary() {
          const subtotal = getCartSubtotal();
          const isDelivery =
            document.querySelector('input[name="delivery_option"]:checked')
              .value === "delivery";
          const currentDeliveryFee = isDelivery ? deliveryFee : 0;
          const total = subtotal + currentDeliveryFee;

          summarySubtotal.innerText = formatCurrency(subtotal);
          summaryDeliveryFee.innerText = formatCurrency(currentDeliveryFee);
          summaryTotal.innerText = formatCurrency(total);

          if (isDelivery) {
            summaryDeliveryLine.classList.remove("hidden");
            addressFields.classList.remove("hidden");
            pickupAddress.classList.add("hidden");
            // Adiciona 'required' aos campos de endere√ßo
            document
              .getElementById("customer-street")
              .setAttribute("required", "");
            document
              .getElementById("customer-number")
              .setAttribute("required", "");
          } else {
            summaryDeliveryLine.classList.add("hidden");
            addressFields.classList.add("hidden");
            pickupAddress.classList.remove("hidden");
            // Remove 'required' dos campos de endere√ßo
            document
              .getElementById("customer-street")
              .removeAttribute("required");
            document
              .getElementById("customer-number")
              .removeAttribute("required");
          }
        }

        function toggleModal(modal, show) {
          if (show) {
            modal.classList.remove("hidden");
            setTimeout(() => {
              modal.classList.remove("opacity-0");
              modal.querySelector(".modal-content").classList.remove("scale-95");
            }, 10);
          } else {
            modal.classList.add("opacity-0");
            modal.querySelector(".modal-content").classList.add("scale-95");
            setTimeout(() => {
              modal.classList.add("hidden");
            }, 300);
          }
        }

        function generateWhatsAppMessage() {
          // --- IN√çCIO DA ALTERA√á√ÉO ---
          // Agora, a mensagem √© formatada como uma "Comanda" para o restaurante

          const name = document.getElementById("customer-name").value;
          const deliveryOption = document.querySelector(
            'input[name="delivery_option"]:checked'
          ).value;
          const paymentOption = document.querySelector(
            'input[name="payment_option"]:checked'
          ).value;

          const isDelivery = deliveryOption === "delivery";

          // Adiciona data e hora
          const now = new Date();
          const timestamp = now.toLocaleString("pt-BR", {
            day: "2-digit",
            month: "2-digit",
            hour: "2-digit",
            minute: "2-digit",
          });

          // --- CABE√áALHO DA COMANDA ---
          let message = `======= *NOVO PEDIDO* =======\n`;
          message += `*LA CASA BOX & SHAKES*\n`;
          message += `*Data/Hora:* ${timestamp}\n\n`;

          // --- DADOS DO CLIENTE ---
          message += `*CLIENTE:* ${name}\n\n`;

          // --- DADOS DE ENTREGA ---
          if (isDelivery) {
            const street = document.getElementById("customer-street").value;
            const number = document.getElementById("customer-number").value;
            message += `*TIPO:* üöÄ Delivery\n`;
            message += `*ENDERE√áO:* ${street}, N¬∫ ${number}\n`;
          } else {
            message += `*TIPO:* üõçÔ∏è Retirada no Local\n`;
            message += `(Av. Lourival Barbosa, 68 - Ol√≠mpico)\n`;
          }
          message += `----------------------------------\n`;

          // --- ITENS DO PEDIDO ---
          message += `*ITENS DO PEDIDO:*\n\n`;
          cart.forEach((item) => {
            message += `‚ñ™Ô∏è *${item.quantity}x ${item.name}*\n`;
            message += `  (Valor: ${formatCurrency(
              item.price * item.quantity
            )})\n\n`;
          });
          message += `----------------------------------\n`;

          // --- TOTAIS E PAGAMENTO ---
          const subtotal = getCartSubtotal();
          const currentDeliveryFee = isDelivery ? deliveryFee : 0;
          const total = subtotal + currentDeliveryFee;

          message += `*PAGAMENTO:* ${paymentOption}\n\n`;

          message += `Subtotal: ${formatCurrency(subtotal)}\n`;
          if (isDelivery) {
            message += `Taxa de Entrega: ${formatCurrency(currentDeliveryFee)}\n`;
          }
          message += `*TOTAL A PAGAR: ${formatCurrency(total)}*\n`;
          message += `==========================`;
          
          // --- FIM DA ALTERA√á√ÉO ---

          return encodeURIComponent(message);
        }

        function showFakePurchase() {
          // Escolhe dados aleat√≥rios
          const randomName =
            fakeNames[Math.floor(Math.random() * fakeNames.length)];
          const randomNeighborhood =
            fakeNeighborhoods[
              Math.floor(Math.random() * fakeNeighborhoods.length)
            ];
          const randomProduct =
            productNames[Math.floor(Math.random() * productNames.length)];

          // Cria o HTML da notifica√ß√£o
          fakePurchaseNotification.innerHTML = `
            <p class="font-bold text-sm">
              <span class="text-yellow-400">${randomName}</span> (${randomNeighborhood})
            </p>
            <p class="text-xs text-gray-300">acabou de pedir ${randomProduct}!</p>
          `;

          // Mostra a notifica√ß√£o
          fakePurchaseNotification.classList.remove(
            "opacity-0",
            "-translate-y-full"
          );
          fakePurchaseNotification.classList.add(
            "opacity-100",
            "translate-y-0"
          );

          // Esconde a notifica√ß√£o ap√≥s 5 segundos
          setTimeout(() => {
            fakePurchaseNotification.classList.remove(
              "opacity-100",
              "translate-y-0"
            );
            fakePurchaseNotification.classList.add(
              "opacity-0",
              "-translate-y-full"
            );
          }, 5000);
        }

        // --- Event Listeners ---
        cartHeaderArea.addEventListener("click", toggleCart);
        toggleCartBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          toggleCart();
        });
        cartItemsElement.addEventListener("click", handleCartQuantityChange);

        openCheckoutModalBtn.addEventListener("click", () => {
          if (cart.length === 0) return;
          updateCheckoutSummary();
          toggleModal(checkoutModal, true);
        });

        cancelCheckoutBtn.addEventListener("click", () => {
          toggleModal(checkoutModal, false);
          formError.classList.add("hidden");
        });

        deliveryOptions.addEventListener("change", updateCheckoutSummary);

        checkoutForm.addEventListener("submit", (e) => {
          e.preventDefault();
          formError.classList.add("hidden");

          // Valida√ß√£o dos campos 'required'
          const inputs =
            checkoutForm.querySelectorAll("input[required]:not(:disabled)");
          let isValid = true;
          inputs.forEach((input) => {
            if (!input.value.trim()) {
              isValid = false;
              input.classList.add("border-red-500", "focus:ring-red-500");
            } else {
              input.classList.remove("border-red-500", "focus:ring-red-500");
              input.classList.add("border-gray-600", "focus:ring-yellow-400");
            }
          });

          if (!isValid) {
            formError.classList.remove("hidden");
            return;
          }

          const message = generateWhatsAppMessage();
          const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;

          // Abre o WhatsApp em uma nova aba
          window.open(whatsappUrl, "_blank");

          // Limpa o carrinho e fecha o modal (simulando sucesso)
          cart = [];
          updateCart();
          toggleModal(checkoutModal, false);
          if (isCartOpen) {
            toggleCart();
          }
          checkoutForm.reset();
          updateCheckoutSummary(); // Reseta o sum√°rio
        });

        // --- Inicializa√ß√£o ---
        renderCategoryFilters();
        renderMenu(); // Renderiza o menu inicial com "Todos"
        updateCart();

        // Inicia a notifica√ß√£o falsa ap√≥s 10 segundos e repete a cada 15 segundos
        setTimeout(() => {
          showFakePurchase();
          setInterval(showFakePurchase, 15000); // Repete
        }, 10000); // Primeira vez
      });
    </script>
  </body>
</html>